!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("vest-utils"),require("n4s")):"function"==typeof define&&define.amd?define(["exports","vest-utils","n4s"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).schema={},e["vest-utils"],e.n4s)}(this,(function(e,n,r){"use strict";function t(e,n){var r={pass:e};return n&&(r.message=n),r}function u(){return t(!1)}function i(){return t(!0)}function o(e,n){try{return e.run(n)}catch(e){return u()}}function f(e,n){var t=function(t){var u=e[t],i=n[t],f=r.ctx.run({value:u,set:!0,meta:{key:t}},(function(){return o(i,u)}));if(!f.pass)return{value:f}};for(var u in n){var f=t(u);if("object"==typeof f)return f.value}return i()}r.enforce.extend({isArrayOf:function(e,t){return u=n.mapFirst(e,(function(e,n,u){var i=r.ctx.run({value:e,set:!0,meta:{index:u}},(function(){return o(t,e)}));n(!i.pass,i)})),n.defaultTo(u,i());var u},loose:f,optional:function(e,r){return n.isNullish(e)?i():o(r,e)},shape:function(e,r){var t=f(e,r);if(!t.pass)return t;for(var o in e)if(!n.hasOwnProperty(r,o))return u();return i()}}),e.partial=function(e){var n={};for(var t in e)n[t]=r.enforce.optional(e[t]);return n},Object.defineProperty(e,"__esModule",{value:!0})}));
